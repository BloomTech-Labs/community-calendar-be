type User {
  id: ID! @id
  first_name: String
  last_name: String
  auth0_id: String! @unique
  organizations: [Organization!] @relation(name: "UsersOrganizations", link: TABLE)
  rsvps: [Event!] @relation(name: "UsersRsvps", link: TABLE)
  admin_for: [Event!] @relation(name: "EventsAdmins", link: TABLE)
  created_events: [Event!] @relation(name: "CreatedEvents", link: TABLE, onDelete: CASCADE)
}

type Event {
  id: ID! @id
  title: String!
  description: String!
  start: DateTime!
  end: DateTime!
  ticketType: TicketType!
  creator: User @relation(name: "CreatedEvents")
  event_images: [Event_Image!] @relation(name: "EventsImages", link: TABLE, onDelete: CASCADE)
  rsvps: [User!] @relation(name: "UsersRsvps")
  urls: [Event_Url!] @relation(name: "EventUrls", link: TABLE, onDelete: CASCADE)
  admins: [User!] @relation(name: "EventsAdmins")
  locations: [Location!] @relation(name: "EventsLocations", link: TABLE, onDelete: CASCADE)
  tags: [Tag!] @relation(name: "Event_Tags", link: TABLE )
}

type Tag{
  id: ID! @id
  title: String! @unique
  events: [Event!] @relation(name:"Event_Tags")
}

type Event_Image {
  id: ID! @id
  event: Event! @relation(name: "EventsImages")
  url: String!
}

type Event_Url {
  id: ID! @id
  url: String!
  event: Event! @relation(name: "EventUrls")
}

type Location {
  id: ID! @id
  name: String!
  street_address: String!
  street_address_2: String  
  city: String!
  zipcode: Int!
  state: String!
  latitude: Float
  longitude: Float
  event: Event! @relation(name: "EventsLocations")
  neighborhood: Neighborhood @relation(name: "OrganizationLocations",link: TABLE)
}

type Organization {
  id: ID! @id
  name: String!
  url: String
  phone: String
  email: String
  users: [User!] @relation(name: "UsersOrganizations")
}

type Neighborhood {
  id: ID! @id
  geo_json: Geo_Json! @relation(name: "NeighborhoodGeo",link: INLINE, onDelete: CASCADE)
  locations: [Location!] @relation(name: "OrganizationLocations")
}

type Geo_Json {
  id: ID! @id
  geo_json: String!
  neighborhood: Neighborhood! @relation(name: "NeighborhoodGeo", onDelete: CASCADE)
}

enum TicketType {
  PAID
  FREE
}